<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.9.7/jquery.fullpage.min.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.css"/>
    <link rel="stylesheet" href="./style.css">
</head>
<body>
    <header>
        <div class="inner">
            <h1><img src="./images/logo.png" alt=""></h1>
            <nav>
                <ul>
                    <li><a href="">COMPANY</a></li>
                    <li><a href="">BRAND</a></li>
                    <li><a href="">MENU</a></li>
                    <li><a href="">STIRE</a></li>
                    <li><a href="">FRANCHISE</a></li>
                    <li><a href="">COMMUNITY</a></li>
                    <li><a href="">RECRUIT</a></li>
                </ul>
            </nav>
            <div class="btns">
                <a href="">가맹문의</a>
                <form action="">
                    <input type="search" placeholder="SEARCH">
                    <button type="submit">search</button>
                </form>
            </div>
            <ul class="lang">
                <li>KOREAN</li>
                <li>ENGLISH</li>
            </ul>
        </div>
    </header>
    <ul id="menu">
        <li data-menuanchor="cont01"><a href="#cont01"><span>홈</span></a></li>
        <li data-menuanchor="cont02"><a href="#cont02"><span>브랜드</span></a></li>
        <li data-menuanchor="cont03"><a href="#cont03"><span>메뉴</span></a></li>
        <li data-menuanchor="cont04"><a href="#cont04"><span>서비스</span></a></li>
    </ul>
    <div id="fullpage">
        <div class="section cont01" data-anchor="cont01">
            <div class="swiper">
                <div class="swiper-wrapper">
                    <div class="swiper-slide">
                        <div><span>포메인,</span>햅쌀로 자가제면 自家製麵</div>
                        <div>
                            <ul>
                                <li>갓 지은 햅쌀밥의 향</li>
                                <li>맑고 투명한 빛깔</li>
                                <li>부드럽고 쫀득한 식감</li>
                            </ul>
                        </div>
                    </div>
                    <div class="swiper-slide">
                        <div>"쌀국수는 쌀국수답게"</div>
                        <div>포메인이 가장 포메인다울 수 있도록</div>
                    </div>
                    <div class="swiper-slide">
                        <div><span>매일매일 까다로운</span>포메인다움</div>
                        <div>엄선한 9가지 상급 천연 향신료로 매일 매장에서 직접 끓여낸 명품 육수를 사용합니다.</div>
                    </div>
                    <div class="swiper-slide">
                        <div><span>재료부터 건강한</span>포메인다움</div>
                        <div>위해 상품차단 시스템으로 안전하고 우수한 품질의 식자재를 공급 받습니다.</div>
                    </div>
                </div>
                <div class="swiper-pagination">
                    
                </div>
            </div>
            
        </div>
        <div class="section cont02" data-anchor="cont02">
            <div class="cont">
                <div class="box">
                    <strong>SINCE 2006</strong>
                    대한민국 쌀국수의 역사,<br>포메인으로부터.
                </div>
                <div class="count_area">
                    <div class="count" id="count"></div>
                    <div>누적 고객 수 1억명 돌파</div>
                    <div><img src="./images/ico_customers_number.png" alt=""></div>
                </div>
            </div>
        </div>
        <div class="section cont03" data-anchor="cont03">
            <div class="top_cont">
                베트남 요리,<span>32가지 감동을 담다.</span>
                <div><a href="">포메인 전체메뉴 보기</a></div>
                <p>* 매장별로 판매 메뉴는 상이 할 수 있습니다.</p>
            </div>
            <div class="btm_cont">
                <div>
                    <div class="img"><img src="./images/ico_menu_info_01.png" alt=""></div>
                    <div class="year"><strong id="yearCount">0</strong><span>th</span></div>
                    <div class="since">SINCE 2006</div>
                </div>
            </div>
        </div>
        <div class="section cont04" data-anchor="cont04">
            <div class="txt_area">
                <span>ENJOY SERVICE</span>
                <div>당신의 모든 순간</div>
                <strong>포메인</strong>
            </div>
            <div class="img"><img src="./images/ico_moto_01.png" alt=""></div>
            <div class="txt">포메인<strong>딜리버리 매장</strong></div>
        </div>
    </div>
    <a class="btn_down"><img src="./images/down_ic.png" alt=""></a>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.7.1/jquery.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fullPage.js/2.9.7/jquery.fullpage.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/swiper@11/swiper-bundle.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery-animateNumber/0.0.14/jquery.animateNumber.min.js"></script>


    <script>
        $(document).ready(function() {
            const navTxtArr = [
                '쌀국수는<br>쌀국수답게',
                '쌀국수는<br>포메인',
                '매일매일 까다로운<br>포메인다움',
                '재료부터 건강한<br>포메인다움',
            ];
            const btn = document.querySelector('.btn_down');
            
            $('#fullpage').fullpage({
                autoScrolling: true,
                slidesNavigation: true,
                controlArrows: true,

                menu: '#menu',
                anchors: ['cont01', 'cont02', 'cont03','cont04'],
                afterRender: function() {
                    document.querySelector('.btn_down').addEventListener('click', (e) => {
                    e.preventDefault();
                    $.fn.fullpage.moveSectionDown(); // 이렇게 직접 호출해야 함
                });
                },
                afterLoad: function(origin, destination, direction, trigger){    
                    if(origin === 'cont02'){
                        $('#count').animateNumber({
                            number: 112000000,
                            numberStep: $.animateNumber.numberStepFactories.separator(',')
                        },
                        2000
                        );
                    }
                    if(origin === 'cont03'){
                        $('#yearCount').animateNumber({
                            number: 18
                        }, 500);
                    }
                },
                onLeave:function(origin, destination){
                    console.log(origin, destination);
                    
                    if(destination === 2){
                        $('#count').animateNumber({
                            number: 0
                        },10);
                    }
                    if(destination === 3){
                        $('#yearCount').animateNumber({
                            number: 0
                        },10);
                    }
                }
            });

            // slider
            const swiper = new Swiper('.swiper', {
                loop: true,
                pagination: {
                    el: '.swiper-pagination',
                    clickable: true,
                    renderBullet: function (index, className) {        
                        return `<div class="${className}">
                                <div class="bar"></div>
                                <p>${navTxtArr[index]}</p>
                            </div>`;
                    }
                },
                autoplay: {
                    delay: 10000,
                    disableOnInteraction: false
                },
            });

            
        });
    </script>
</body>
</html>